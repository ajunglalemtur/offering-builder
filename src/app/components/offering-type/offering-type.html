<div class="offering-type-container">
  <!-- Section header -->
  <div class="offering-header">
    <h2>Pick Offering Type</h2>
  </div>
  
  <!-- Grid of offering type cards -->
  <div class="offering-cards">
    @for (option of offeringOptions; track option.type) {
      <div 
        class="offering-card" 
        [class.selected]="isSelected(option.type)"
        [class.suggested]="isSuggested(option.type)"
        (click)="selectOffering(option.type)"
        role="button"
        tabindex="0"
        [attr.aria-pressed]="isSelected(option.type)">
        
        <!-- Suggested badge (only shown on recommended option) -->
        @if (isSuggested(option.type)) {
          <div class="suggested-badge">Suggested!</div>
        }
        
        <!-- Icon -->
        <div class="offering-icon">
          @if (option.type === 'product') {
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <rect x="8" y="8" width="24" height="24" rx="2" stroke="currentColor" stroke-width="2"/>
              <path d="M8 16H32M16 8V32M24 8V32" stroke="currentColor" stroke-width="2"/>
              <circle cx="20" cy="20" r="2" fill="currentColor"/>
            </svg>
          }
          @if (option.type === 'service') {
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <circle cx="20" cy="20" r="12" stroke="currentColor" stroke-width="2"/>
              <path d="M20 14V20L24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <circle cx="20" cy="8" r="2" fill="currentColor"/>
              <circle cx="20" cy="32" r="2" fill="currentColor"/>
              <circle cx="8" cy="20" r="2" fill="currentColor"/>
              <circle cx="32" cy="20" r="2" fill="currentColor"/>
            </svg>
          }
          @if (option.type === 'subscription') {
            <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
              <path d="M12 10C12 8.89543 12.8954 8 14 8H26C27.1046 8 28 8.89543 28 10V30C28 31.1046 27.1046 32 26 32H14C12.8954 32 12 31.1046 12 30V10Z" stroke="currentColor" stroke-width="2"/>
              <path d="M16 14H24M16 18H24M16 22H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <circle cx="20" cy="27" r="1.5" fill="currentColor"/>
            </svg>
          }
        </div>
        
        <!-- Offering title and description -->
        <div class="offering-title">{{ option.title }}</div>
        <div class="offering-description">{{ option.description }}</div>
      </div>
    }
  </div>

  <!-- Product Type Selection (shown only when Product is selected) -->
  @if (isSelected('product')) {
    <div class="product-type-selection">
      <button 
        class="product-type-btn"
        [class.selected]="selectedProductType() === 'physical'"
        (click)="selectProductType('physical')"
        aria-label="Physical Product">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M10 2L2 6L10 10L18 6L10 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 14L10 18L18 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 10L10 14L18 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Physical Product
      </button>
      <button 
        class="product-type-btn"
        [class.selected]="selectedProductType() === 'digital'"
        (click)="selectProductType('digital')"
        aria-label="Digital Product">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M3 6C3 4.89543 3.89543 4 5 4H15C16.1046 4 17 4.89543 17 6V14C17 15.1046 16.1046 16 15 16H5C3.89543 16 3 15.1046 3 14V6Z" stroke="currentColor" stroke-width="1.5"/>
          <path d="M7 8H13M7 11H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        Digital Product
      </button>
    </div>
  }

  <!-- Information box explaining the selected type -->
  @if (getSelectedExplanation()) {
    <div class="explanation-box">
      <div class="explanation-icon">ðŸ’¡</div>
      <div class="explanation-content">
        <div class="explanation-title">{{ getSelectedExplanation()!.title }}</div>
        <div class="explanation-text" [innerHTML]="getSelectedExplanation()!.text"></div>
      </div>
    </div>
  }
</div>
